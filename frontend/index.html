<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç²¾é…¿å•¤é…’æ¨èç³»ç»Ÿ</title>
    <style>
      /* å…¨å±€æ ·å¼ */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      /* å¯¼å…¥å¯çˆ±å­—ä½“ */
      @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap');

      body {
        font-family: 'Comic Neue', 'Microsoft YaHei', cursive, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 50%, #ffcc80 100%);
        color: #5d4037;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* æ ‡é¢˜æ ·å¼ */
      h1 {
        text-align: center;
        margin-bottom: 30px;
        color: #ff7043;
        font-size: 3rem;
        font-weight: 700;
        text-shadow: 2px 2px 4px rgba(255, 112, 67, 0.2);
        animation: bounceIn 1s ease;
        position: relative;
      }

      h1::before {
        content: 'ğŸ»';
        margin-right: 15px;
        animation: float 2s ease-in-out infinite;
      }

      h1::after {
        content: 'ğŸ»';
        margin-left: 15px;
        animation: float 2s ease-in-out infinite 0.5s;
      }

      h2 {
        margin-bottom: 25px;
        color: #ff9800;
        border-bottom: 3px solid #ff9800;
        padding-bottom: 10px;
        font-size: 1.8rem;
        font-weight: 600;
        position: relative;
      }

      h2::after {
        content: 'ğŸº';
        margin-left: 10px;
      }

      /* æµ®åŠ¨åŠ¨ç”» */
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }

      /* åŠŸèƒ½åŒºåŸŸæ ·å¼ */
      .section {
        background-color: white;
        border-radius: 25px;
        box-shadow: 0 8px 25px rgba(255, 152, 0, 0.15);
        padding: 30px;
        margin-bottom: 35px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .section:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px rgba(255, 152, 0, 0.25);
      }

      /* åŠŸèƒ½åŒºå—è£…é¥°å›¾æ ‡ */
      .section:nth-child(2)::before { /* å•¤é…’æ¨è */
        content: 'ğŸº';
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.1;
        z-index: 0;
      }

      .section:nth-child(3)::before { /* å•¤é…’çŸ¥è¯†é—®ç­” */
        content: 'ğŸ“š';
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.1;
        z-index: 0;
      }

      .section:nth-child(4)::before { /* å•¤é…’ä¸ç¾é£Ÿæ­é… */
        content: 'ğŸ½ï¸';
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.1;
        z-index: 0;
      }

      .section:nth-child(5)::before { /* å•¤é…’é£æ ¼æŒ‡å— */
        content: 'ğŸ¯';
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 3rem;
        opacity: 0.1;
        z-index: 0;
      }

      /* è¡¨å•æ ·å¼ */
      .form-group {
        margin-bottom: 25px;
        position: relative;
        z-index: 1;
      }

      label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #f57c00;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
      }

      label::before {
        content: 'ğŸ€';
        margin-right: 10px;
        font-size: 1.2rem;
        animation: swing 2s ease-in-out infinite;
      }

      /* æ‘†åŠ¨åŠ¨ç”» */
      @keyframes swing {
        0% { transform: rotate(0deg); }
        25% { transform: rotate(5deg); }
        75% { transform: rotate(-5deg); }
        100% { transform: rotate(0deg); }
      }

      input, select, textarea {
        width: 100%;
        padding: 15px 20px;
        border: 2px solid #ffe0b2;
        border-radius: 20px;
        font-size: 16px;
        font-family: inherit;
        transition: all 0.3s ease;
        background-color: #fffaf0;
      }

      input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #ffab40;
        box-shadow: 0 0 0 4px rgba(255, 171, 64, 0.2);
        transform: scale(1.02);
      }

      textarea {
        resize: vertical;
        min-height: 120px;
      }

      /* æŒ‰é’®æ ·å¼ */
      button {
        background: linear-gradient(135deg, #ffab40 0%, #ff7043 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 30px;
        font-size: 18px;
        font-weight: 600;
        font-family: inherit;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(255, 112, 67, 0.3);
      }

      button:hover {
        background: linear-gradient(135deg, #ff7043 0%, #ef6c00 100%);
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(255, 112, 67, 0.4);
      }

      button:active {
        transform: translateY(0) scale(0.98);
      }

      button:disabled {
        background: linear-gradient(135deg, #ffd54f 0%, #ffca28 100%);
        cursor: not-allowed;
        transform: none;
        box-shadow: 0 2px 8px rgba(255, 202, 40, 0.3);
      }

      /* å“åº”ç»“æœæ ·å¼ */
      .response {
        margin-top: 25px;
        padding: 25px;
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        border-radius: 20px;
        border-left: 6px solid #ff9800;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(255, 152, 0, 0.1);
        position: relative;
        z-index: 1;
      }

      .response:hover {
        transform: scale(1.01);
        box-shadow: 0 6px 20px rgba(255, 152, 0, 0.2);
      }

      .response h3 {
        margin-bottom: 15px;
        color: #f57c00;
        font-size: 1.5rem;
        font-weight: 600;
        display: flex;
        align-items: center;
      }

      .response h3::before {
        content: 'ğŸ‰';
        margin-right: 10px;
        animation: bounce 1s ease-in-out infinite;
      }

      /* å¼¹è·³åŠ¨ç”» */
      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      .response pre {
        white-space: pre-wrap;
        word-break: break-word;
        background-color: #fce4ec;
        padding: 20px;
        border-radius: 15px;
        font-family: inherit;
        border: 2px dashed #ffcdd2;
      }

      /* é”™è¯¯æç¤ºæ ·å¼ */
      .error {
        color: #e57373;
        font-size: 14px;
        margin-top: 8px;
        font-weight: 500;
      }

      /* æ¨èåˆ—è¡¨æ ·å¼ */
      .recommendation-list {
        margin-top: 20px;
      }

      .recommendation-item {
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        padding: 20px;
        border-radius: 20px;
        margin-bottom: 15px;
        border-left: 6px solid #ff9800;
        transition: all 0.3s ease;
        position: relative;
        box-shadow: 0 4px 12px rgba(255, 152, 0, 0.1);
      }

      .recommendation-item:hover {
        transform: translateX(10px) scale(1.02);
        box-shadow: 0 6px 20px rgba(255, 152, 0, 0.2);
      }

      .recommendation-item h4 {
        color: #f57c00;
        margin-bottom: 12px;
        font-size: 1.3rem;
        font-weight: 700;
        display: flex;
        align-items: center;
      }

      .recommendation-item h4::before {
        content: 'âœ¨ ';
        margin-right: 8px;
        animation: sparkle 1.5s ease-in-out infinite;
      }

      .recommendation-item p {
        margin-bottom: 8px;
        color: #ef6c00;
        font-weight: 500;
        display: flex;
        align-items: center;
      }

      .recommendation-item p::before {
        content: 'ğŸ»';
        margin-right: 8px;
        font-size: 1.2rem;
        opacity: 0.7;
      }

      /* é—ªçƒåŠ¨ç”» */
      @keyframes sparkle {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.2); }
        100% { opacity: 1; transform: scale(1); }
      }

      /* è£…é¥°æ€§å…ƒç´  */
      .section::before {
        content: '';
        position: absolute;
        top: -10px;
        left: 30px;
        width: 40px;
        height: 40px;
        background: radial-gradient(circle, #fff9c4 0%, #ffeb3b 100%);
        border-radius: 50%;
        opacity: 0.7;
      }

      /* åŠ¨ç”»æ•ˆæœ */
      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.3);
        }
        50% {
          opacity: 1;
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
        }
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .container {
          padding: 15px;
        }

        h1 {
          font-size: 2.2rem;
        }

        h1::before,
        h1::after {
          font-size: 2rem;
          margin: 0 8px;
        }

        h2 {
          font-size: 1.5rem;
        }

        .section {
          padding: 20px;
          margin-bottom: 25px;
        }

        .section:nth-child(n)::before {
          font-size: 2.5rem;
          top: 5px;
          right: 10px;
        }

        input, select, textarea {
          padding: 12px 16px;
          font-size: 15px;
        }

        button {
          padding: 12px 24px;
          font-size: 16px;
          width: 100%;
        }

        .response {
          padding: 20px;
        }

        .recommendation-item {
          padding: 18px;
        }
      }

      @media (max-width: 480px) {
        h1 {
          font-size: 1.8rem;
        }

        h1::before,
        h1::after {
          font-size: 1.5rem;
          margin: 0 5px;
        }

        h2 {
          font-size: 1.3rem;
        }

        .section {
          padding: 15px;
        }

        .section:nth-child(n)::before {
          font-size: 2rem;
        }

        .form-group {
          margin-bottom: 20px;
        }

        label {
          font-size: 1rem;
        }

        input, select, textarea {
          padding: 10px 14px;
          font-size: 14px;
        }

        button {
          padding: 10px 20px;
          font-size: 15px;
        }

        .response {
          padding: 15px;
        }

        .response h3 {
          font-size: 1.3rem;
        }

        .recommendation-item {
          padding: 15px;
        }

        .recommendation-item h4 {
          font-size: 1.2rem;
        }
      }

      @media (max-width: 360px) {
        h1 {
          font-size: 1.5rem;
        }

        h2 {
          font-size: 1.2rem;
        }

        .section {
          padding: 12px;
        }

        input, select, textarea {
          padding: 9px 12px;
        }

        button {
          padding: 9px 18px;
          font-size: 14px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ç²¾é…¿å•¤é…’æ¨èç³»ç»Ÿ</h1>

      <!-- å•¤é…’æ¨èåŠŸèƒ½ -->
      <div class="section">
        <h2>å•¤é…’æ¨è</h2>
        <form id="recommend-form">
          <div class="form-group">
            <label for="mood">å¿ƒæƒ…çŠ¶æ€</label>
            <input type="text" id="mood" name="mood" placeholder="ä¾‹å¦‚ï¼šæ”¾æ¾ã€å…´å¥‹ã€ç–²æƒ«" required>
          </div>
          <div class="form-group">
            <label for="taste">å£å‘³åå¥½</label>
            <input type="text" id="taste" name="taste" placeholder="ä¾‹å¦‚ï¼šç”œã€è‹¦ã€é…¸ã€å¹³è¡¡" required>
          </div>
          <div class="form-group">
            <label for="hop">é…’èŠ±åå¥½</label>
            <input type="text" id="hop" name="hop" placeholder="ä¾‹å¦‚ï¼šæŸ‘æ©˜å‘³ã€çƒ­å¸¦æ°´æœå‘³ã€æ¾é’ˆå‘³" required>
          </div>
          <div class="form-group">
            <label for="style">ç²¾é…¿é£æ ¼åå¥½</label>
            <input type="text" id="style" name="style" placeholder="ä¾‹å¦‚ï¼šIPAã€ä¸–æ¶›ã€é…¸è‰¾å°”ã€æ‹‰æ ¼" required>
          </div>
          <div class="form-group">
            <label for="provider">æ¨¡å‹æä¾›å•†ï¼ˆå¯é€‰ï¼‰</label>
            <select id="provider" name="provider">
              <option value="">é»˜è®¤</option>
              <option value="openai">OpenAI</option>
            </select>
          </div>
          <button type="submit">è·å–æ¨è</button>
        </form>
        <div id="recommend-response" class="response"></div>
      </div>

      <!-- å•¤é…’çŸ¥è¯†é—®ç­”åŠŸèƒ½ -->
      <div class="section">
        <h2>å•¤é…’çŸ¥è¯†é—®ç­”</h2>
        <form id="knowledge-form">
          <div class="form-group">
            <label for="question">æ‚¨çš„é—®é¢˜</label>
            <textarea id="question" name="question" placeholder="ä¾‹å¦‚ï¼šä»€ä¹ˆæ˜¯IPAå•¤é…’ï¼Ÿ" required></textarea>
          </div>
          <div class="form-group">
            <label for="knowledge-provider">æ¨¡å‹æä¾›å•†ï¼ˆå¯é€‰ï¼‰</label>
            <select id="knowledge-provider" name="provider">
              <option value="">é»˜è®¤</option>
              <option value="openai">OpenAI</option>
            </select>
          </div>
          <button type="submit">è·å–ç­”æ¡ˆ</button>
        </form>
        <div id="knowledge-response" class="response"></div>
      </div>

      <!-- å•¤é…’ä¸ç¾é£Ÿæ­é…åŠŸèƒ½ -->
      <div class="section">
        <h2>å•¤é…’ä¸ç¾é£Ÿæ­é…</h2>
        <form id="pairing-form">
          <div class="form-group">
            <label for="pairing-mood">å¿ƒæƒ…çŠ¶æ€</label>
            <input type="text" id="pairing-mood" name="mood" placeholder="ä¾‹å¦‚ï¼šæ”¾æ¾ã€èšä¼š" required>
          </div>
          <div class="form-group">
            <label for="pairing-taste">å£å‘³åå¥½</label>
            <input type="text" id="pairing-taste" name="taste" placeholder="ä¾‹å¦‚ï¼šç”œã€å’¸ã€è¾£" required>
          </div>
          <div class="form-group">
            <label for="dining-scenario">é¤é¥®åœºæ™¯</label>
            <input type="text" id="dining-scenario" name="dining_scenario" placeholder="ä¾‹å¦‚ï¼šèšé¤ã€ç‹¬é…Œã€çº¦ä¼š" required>
          </div>
          <div class="form-group">
            <label for="food-type">é£Ÿç‰©ç±»å‹</label>
            <input type="text" id="food-type" name="food_type" placeholder="ä¾‹å¦‚ï¼šçƒ§çƒ¤ã€æµ·é²œã€ç”œç‚¹" required>
          </div>
          <div class="form-group">
            <label for="pairing-provider">æ¨¡å‹æä¾›å•†ï¼ˆå¯é€‰ï¼‰</label>
            <select id="pairing-provider" name="provider">
              <option value="">é»˜è®¤</option>
              <option value="openai">OpenAI</option>
            </select>
          </div>
          <button type="submit">è·å–æ­é…æ¨è</button>
        </form>
        <div id="pairing-response" class="response"></div>
      </div>

      <!-- å•¤é…’é£æ ¼æŒ‡å—åŠŸèƒ½ -->
      <div class="section">
        <h2>å•¤é…’é£æ ¼æŒ‡å—</h2>
        <form id="style-guide-form">
          <div class="form-group">
            <label for="beer-style">å•¤é…’é£æ ¼</label>
            <input type="text" id="beer-style" name="beer_style" placeholder="ä¾‹å¦‚ï¼šIPAã€ä¸–æ¶›ã€é…¸è‰¾å°”" required>
          </div>
          <div class="form-group">
            <label for="style-guide-provider">æ¨¡å‹æä¾›å•†ï¼ˆå¯é€‰ï¼‰</label>
            <select id="style-guide-provider" name="provider">
              <option value="">é»˜è®¤</option>
              <option value="openai">OpenAI</option>
            </select>
          </div>
          <button type="submit">è·å–é£æ ¼æŒ‡å—</button>
        </form>
        <div id="style-guide-response" class="response"></div>
      </div>
    </div>

    <script>
      // ç²¾é…¿å•¤é…’æ¨èç³»ç»Ÿå‰ç«¯é‡æ„
      class BeerRecommendationApp {
        constructor() {
          // APIåŸºç¡€URL
          this.API_BASE_URL = 'http://localhost:8001/api/v1/beer';
          
          // åˆå§‹åŒ–åº”ç”¨
          this.init();
        }

        // åˆå§‹åŒ–åº”ç”¨
        init() {
          // ç»‘å®šæ‰€æœ‰è¡¨å•äº‹ä»¶
          this.bindFormEvents();
          
          // æ·»åŠ è¡¨å•éªŒè¯
          this.addFormValidation();
          
          // åˆå§‹åŒ–åŠ è½½çŠ¶æ€
          this.initLoadingStates();
          
          // æ·»åŠ é¡µé¢å†…åˆ‡æ¢åŠŸèƒ½
          this.addPageNavigation();
        }

        // ç»‘å®šè¡¨å•äº‹ä»¶
        bindFormEvents() {
          const forms = [
            { id: 'recommend-form', endpoint: '/recommend', responseId: 'recommend-response', processor: this.processRecommendResponse.bind(this) },
            { id: 'knowledge-form', endpoint: '/knowledge', responseId: 'knowledge-response', processor: this.processKnowledgeResponse.bind(this) },
            { id: 'pairing-form', endpoint: '/pairing', responseId: 'pairing-response', processor: this.processPairingResponse.bind(this) },
            { id: 'style-guide-form', endpoint: '/style-guide', responseId: 'style-guide-response', processor: this.processStyleGuideResponse.bind(this) }
          ];

          forms.forEach(formConfig => {
            const form = document.getElementById(formConfig.id);
            form.addEventListener('submit', async (e) => {
              await this.handleFormSubmit(e, formConfig);
            });
          });
        }

        // é€šç”¨è¡¨å•æäº¤å¤„ç†å‡½æ•°
        async handleFormSubmit(e, formConfig) {
          e.preventDefault();
          
          const form = e.target;
          const responseDiv = document.getElementById(formConfig.responseId);
          
          // è¡¨å•éªŒè¯
          if (!this.validateForm(form)) {
            return;
          }
          
          // æ¸…ç©ºä¹‹å‰çš„å“åº”
          responseDiv.innerHTML = '';
          
          // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
          this.showLoading(responseDiv);
          
          // è·å–è¡¨å•æ•°æ®
          const formData = new FormData(form);
          const data = Object.fromEntries(formData);
          
          // è¿‡æ»¤æ‰ç©ºå€¼
          const filteredData = {};
          for (const [key, value] of Object.entries(data)) {
            if (value !== '') {
              filteredData[key] = value;
            }
          }
          
          // è·å–æŸ¥è¯¢å‚æ•°ï¼ˆæ¨¡å‹æä¾›å•†ï¼‰
          const provider = filteredData.provider;
          delete filteredData.provider;
          
          try {
            // æ„å»ºAPI URL
            let url = `${this.API_BASE_URL}${formConfig.endpoint}`;
            if (provider) {
              url += `?provider=${provider}`;
            }
            
            // å‘é€è¯·æ±‚
            const response = await fetch(url, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(filteredData)
            });
            
            if (!response.ok) {
              throw new Error(`HTTPé”™è¯¯ï¼çŠ¶æ€ï¼š${response.status}`);
            }
            
            // è§£æå“åº”æ•°æ®
            const result = await response.json();
            
            // å¤„ç†å“åº”
            formConfig.processor(result, responseDiv);
            
          } catch (error) {
            this.showError(responseDiv, error.message);
          } finally {
            // éšè—åŠ è½½çŠ¶æ€
            this.hideLoading(responseDiv);
          }
        }

        // æ·»åŠ è¡¨å•éªŒè¯
        addFormValidation() {
          const requiredFields = document.querySelectorAll('[required]');
          
          requiredFields.forEach(field => {
            // æ·»åŠ è¾“å…¥éªŒè¯
            field.addEventListener('input', () => {
              this.validateField(field);
            });
            
            // æ·»åŠ å¤±ç„¦éªŒè¯
            field.addEventListener('blur', () => {
              this.validateField(field);
            });
          });
        }

        // éªŒè¯å•ä¸ªå­—æ®µ
        validateField(field) {
          const errorElement = field.parentElement.querySelector('.error');
          
          // ç§»é™¤å·²æœ‰çš„é”™è¯¯æç¤º
          if (errorElement) {
            errorElement.remove();
          }
          
          // éªŒè¯å¿…å¡«å­—æ®µ
          if (field.required && field.value.trim() === '') {
            this.showFieldError(field, 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹');
            return false;
          }
          
          // ç§»é™¤è¾“å…¥å†…å®¹é•¿åº¦é™åˆ¶ï¼Œå…è®¸æ›´çµæ´»çš„ç”¨æˆ·è¾“å…¥
          
          return true;
        }

        // éªŒè¯æ•´ä¸ªè¡¨å•
        validateForm(form) {
          const fields = form.querySelectorAll('input, textarea, select');
          let isValid = true;
          
          fields.forEach(field => {
            if (!this.validateField(field)) {
              isValid = false;
            }
          });
          
          return isValid;
        }

        // æ˜¾ç¤ºå­—æ®µé”™è¯¯
        showFieldError(field, message) {
          let errorElement = field.parentElement.querySelector('.error');
          
          if (!errorElement) {
            errorElement = document.createElement('div');
            errorElement.className = 'error';
            field.parentElement.appendChild(errorElement);
          }
          
          errorElement.textContent = message;
        }

        // åˆå§‹åŒ–åŠ è½½çŠ¶æ€
        initLoadingStates() {
          // åˆ›å»ºåŠ è½½åŠ¨ç”»æ ·å¼
          const style = document.createElement('style');
          style.textContent = `
            .loading {
              display: inline-block;
              width: 20px;
              height: 20px;
              border: 3px solid rgba(255, 171, 64, 0.3);
              border-radius: 50%;
              border-top-color: #ffab40;
              animation: spin 1s ease-in-out infinite;
            }
            
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
          `;
          document.head.appendChild(style);
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        showLoading(element) {
          const loadingDiv = document.createElement('div');
          loadingDiv.className = 'loading-container';
          loadingDiv.innerHTML = `
            <div style="display: flex; align-items: center; justify-content: center; padding: 20px;">
              <div class="loading"></div>
              <span style="margin-left: 10px; color: #f57c00;">æ­£åœ¨è·å–ç»“æœ...</span>
            </div>
          `;
          element.appendChild(loadingDiv);
        }

        // éšè—åŠ è½½çŠ¶æ€
        hideLoading(element) {
          const loadingDiv = element.querySelector('.loading-container');
          if (loadingDiv) {
            loadingDiv.remove();
          }
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        showError(element, message) {
          element.innerHTML = `
            <h3>é”™è¯¯</h3>
            <p>è¯·æ±‚å¤±è´¥ï¼š${message}</p>
            <button onclick="app.resetForm('${element.id}')" style="margin-top: 10px;">é‡è¯•</button>
          `;
        }

        // é‡ç½®è¡¨å•
        resetForm(responseId) {
          const responseDiv = document.getElementById(responseId);
          const formId = responseId.replace('-response', '-form');
          const form = document.getElementById(formId);
          
          // æ¸…ç©ºå“åº”
          responseDiv.innerHTML = '';
          
          // é‡ç½®è¡¨å•
          if (form) {
            form.reset();
            
            // ç§»é™¤æ‰€æœ‰é”™è¯¯æç¤º
            const errorElements = form.querySelectorAll('.error');
            errorElements.forEach(el => el.remove());
          }
        }

        // æ·»åŠ é¡µé¢å†…å¯¼èˆªåŠŸèƒ½
        addPageNavigation() {
          // åˆ›å»ºå¯¼èˆªèœå•
          const navMenu = document.createElement('div');
          navMenu.style.cssText = `
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
          `;
          
          const navItems = [
            { id: 'recommend', name: 'ğŸº å•¤é…’æ¨è', icon: 'ğŸº' },
            { id: 'knowledge', name: 'ğŸ“š çŸ¥è¯†é—®ç­”', icon: 'ğŸ“š' },
            { id: 'pairing', name: 'ğŸ½ï¸ ç¾é£Ÿæ­é…', icon: 'ğŸ½ï¸' },
            { id: 'style-guide', name: 'ğŸ¯ é£æ ¼æŒ‡å—', icon: 'ğŸ¯' }
          ];

          navItems.forEach(item => {
            const navItem = document.createElement('button');
            navItem.textContent = item.name;
            navItem.style.cssText = `
              background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
              color: white;
              border: none;
              padding: 12px 20px;
              border-radius: 25px;
              font-size: 16px;
              font-weight: 600;
              font-family: inherit;
              cursor: pointer;
              transition: all 0.3s ease;
              box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
            `;
            
            navItem.addEventListener('click', () => {
              this.showSection(item.id);
            });
            
            navItem.addEventListener('mouseover', () => {
              navItem.style.transform = 'translateY(-2px) scale(1.05)';
              navItem.style.boxShadow = '0 6px 20px rgba(255, 152, 0, 0.4)';
            });
            
            navItem.addEventListener('mouseout', () => {
              navItem.style.transform = 'translateY(0) scale(1)';
              navItem.style.boxShadow = '0 4px 15px rgba(255, 152, 0, 0.3)';
            });
            
            navMenu.appendChild(navItem);
          });

          // æ’å…¥å¯¼èˆªèœå•
          const container = document.querySelector('.container');
          const h1 = container.querySelector('h1');
          container.insertBefore(navMenu, h1.nextSibling);

          // é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªéƒ¨åˆ†
          this.showSection('recommend');
        }

        // æ˜¾ç¤ºæŒ‡å®šéƒ¨åˆ†
        showSection(sectionId) {
          // éšè—æ‰€æœ‰éƒ¨åˆ†
          const sections = document.querySelectorAll('.section');
          sections.forEach(section => {
            section.style.display = 'none';
          });

          // æ˜¾ç¤ºæŒ‡å®šéƒ¨åˆ†
          const targetSection = document.getElementById(sectionId + '-form').closest('.section');
          if (targetSection) {
            targetSection.style.display = 'block';
            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }

        // å¤„ç†å•¤é…’æ¨èå“åº”
        processRecommendResponse(result, responseDiv) {
          if (result.success && result.recommendations) {
            let html = '<h3>æ¨èç»“æœ</h3><div class="recommendation-list">';
            
            result.recommendations.forEach((beer, index) => {
              html += `
                <div class="recommendation-item">
                  <h4>${index + 1}. ${beer.name}</h4>
                  <div class="beer-info" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ffcc80;">
                    <p><strong>é£æ ¼ï¼š</strong>${beer.style}</p>
                    <p><strong>é…’ç²¾åº¦ï¼š</strong>${beer.abv}</p>
                  </div>
                  <div class="beer-description">
                    <p><strong>æ¨èç†ç”±ï¼š</strong>${beer.reason}</p>
                    <p><strong>é¥®ç”¨åœºæ™¯ï¼š</strong>${beer.drinking_scenario}</p>
                  </div>
                  <button onclick="app.saveRecommendation('${beer.name}')" style="margin-top: 15px; padding: 8px 15px; font-size: 14px; background: linear-gradient(135deg, #ffb74d 0%, #ffa726 100%);">â¤ï¸ æ”¶è—</button>
                </div>
              `;
            });
            
            html += '</div>';
            responseDiv.innerHTML = html;
          } else {
            responseDiv.innerHTML = `
              <h3>é”™è¯¯</h3>
              <p>${result.message || 'æ¨èç”Ÿæˆå¤±è´¥'}</p>
              <button onclick="app.resetForm('${responseDiv.id}')" style="margin-top: 10px;">é‡è¯•</button>
            `;
          }
        }

        // å¤„ç†çŸ¥è¯†é—®ç­”å“åº”
        processKnowledgeResponse(result, responseDiv) {
          if (result.success) {
            // å°†ç­”æ¡ˆå†…å®¹åˆ†æ®µæ˜¾ç¤ºï¼Œæé«˜å¯è¯»æ€§
            const formattedAnswer = result.answer.replace(/\n/g, '<br>');
            
            responseDiv.innerHTML = `
              <h3>ç­”æ¡ˆ</h3>
              <div style="background-color: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                ${formattedAnswer}
              </div>
              <button onclick="app.copyToClipboard('${responseDiv.id}')" style="margin-top: 10px;">ğŸ“‹ å¤åˆ¶ç­”æ¡ˆ</button>
            `;
          } else {
            responseDiv.innerHTML = `
              <h3>é”™è¯¯</h3>
              <p>${result.message || 'å›ç­”ç”Ÿæˆå¤±è´¥'}</p>
              <button onclick="app.resetForm('${responseDiv.id}')" style="margin-top: 10px;">é‡è¯•</button>
            `;
          }
        }

        // å¤„ç†æ­é…æ¨èå“åº”
        processPairingResponse(result, responseDiv) {
          if (result.success && result.pairings) {
            let html = '<h3>æ­é…æ¨è</h3>';
            html += '<div class="recommendation-list">';
            
            result.pairings.forEach((pairing, index) => {
              html += `
                <div class="recommendation-item">
                  <h4>${index + 1}. ${pairing.beer}</h4>
                  <p><strong>æ­é…é£Ÿç‰©ï¼š</strong>${pairing.food}</p>
                  <p><strong>æ­é…ç†ç”±ï¼š</strong>${pairing.reason}</p>
                  <button onclick="app.sharePairing('${pairing.beer}', '${pairing.food}')" style="margin-top: 10px; padding: 8px 15px; font-size: 14px;">ğŸ“¤ åˆ†äº«</button>
                </div>
              `;
            });
            
            html += '</div>';
            responseDiv.innerHTML = html;
          } else {
            responseDiv.innerHTML = `
              <h3>é”™è¯¯</h3>
              <p>${result.message || 'æ­é…æ¨èç”Ÿæˆå¤±è´¥'}</p>
              <button onclick="app.resetForm('${responseDiv.id}')" style="margin-top: 10px;">é‡è¯•</button>
            `;
          }
        }

        // å¤„ç†é£æ ¼æŒ‡å—å“åº”
        processStyleGuideResponse(result, responseDiv) {
          if (result.success) {
            responseDiv.innerHTML = `
              <h3>é£æ ¼æŒ‡å—</h3>
              <p>${result.guide}</p>
              <button onclick="app.copyToClipboard('${responseDiv.id}')" style="margin-top: 10px;">ğŸ“‹ å¤åˆ¶æŒ‡å—</button>
            `;
          } else {
            responseDiv.innerHTML = `
              <h3>é”™è¯¯</h3>
              <p>${result.message || 'é£æ ¼æŒ‡å—ç”Ÿæˆå¤±è´¥'}</p>
              <button onclick="app.resetForm('${responseDiv.id}')" style="margin-top: 10px;">é‡è¯•</button>
            `;
          }
        }

        // ä¿å­˜æ¨èåˆ°æœ¬åœ°å­˜å‚¨
        saveRecommendation(beerName) {
          let savedRecommendations = JSON.parse(localStorage.getItem('beerRecommendations')) || [];
          
          if (!savedRecommendations.includes(beerName)) {
            savedRecommendations.push(beerName);
            localStorage.setItem('beerRecommendations', JSON.stringify(savedRecommendations));
            alert(`å·²æ”¶è—ï¼š${beerName}`);
          } else {
            alert(`å·²ç»æ”¶è—è¿‡ï¼š${beerName}`);
          }
        }

        // å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿
        async copyToClipboard(responseId) {
          const responseDiv = document.getElementById(responseId);
          const content = responseDiv.querySelector('p').textContent;
          
          try {
            await navigator.clipboard.writeText(content);
            alert('å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
          } catch (err) {
            alert('å¤åˆ¶å¤±è´¥ï¼š' + err.message);
          }
        }

        // åˆ†äº«æ­é…æ¨è
        sharePairing(beer, food) {
          const shareText = `ğŸ» æ¨èæ­é…ï¼š${beer} + ${food}\næ¥è‡ªç²¾é…¿å•¤é…’æ¨èç³»ç»Ÿ`;
          
          if (navigator.share) {
            navigator.share({
              title: 'ç²¾é…¿å•¤é…’æ­é…æ¨è',
              text: shareText
            }).catch(err => {
              console.error('åˆ†äº«å¤±è´¥ï¼š', err);
              this.fallbackShare(shareText);
            });
          } else {
            this.fallbackShare(shareText);
          }
        }

        // é™çº§åˆ†äº«æ–¹æ¡ˆ
        fallbackShare(text) {
          navigator.clipboard.writeText(text).then(() => {
            alert('åˆ†äº«å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
          }).catch(err => {
            alert('åˆ†äº«å¤±è´¥ï¼š' + err.message);
          });
        }
      }

      // åˆå§‹åŒ–åº”ç”¨
      const app = new BeerRecommendationApp();
    </script>
  </body>
</html>